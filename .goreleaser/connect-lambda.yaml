---
project_name: redpanda-connect
dist: target/dist
version: 2

builds:
  - id: connect-lambda
    main: cmd/serverless/connect-lambda/main.go
    binary: redpanda-connect-lambda
    env:
      - CGO_ENABLED=0
    tags:
      - timetzdata
    goos: [ linux ]
    goarch: [ amd64 ]

  - id: connect-lambda-al2
    main: cmd/serverless/connect-lambda/main.go
    binary: bootstrap
    env:
      - CGO_ENABLED=0
    tags:
      - timetzdata
    goos: [ linux ]
    goarch: [ amd64, arm64 ]

archives:
  - id: connect-lambda
    ids: [ connect-lambda ]
    formats: zip
    name_template: "{{ .Binary }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"

  - id: connect-lambda-al2
    ids: [ connect-lambda-al2 ]
    formats: zip
    name_template: "redpanda-connect-lambda-al2_{{ .Version }}_{{ .Os }}_{{ .Arch }}"

release:
  github:
    owner: redpanda-data
    name: connect
  prerelease: auto
  mode: keep-existing

