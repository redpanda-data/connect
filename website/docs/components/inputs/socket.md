---
title: socket
type: input
status: stable
categories: ["Network"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the contents of:
     lib/input/socket.go
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


Connects to a (tcp/unix) socket and consumes a continuous stream of messages.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yaml
# Common config fields, showing default values
input:
  socket:
    network: unix
    address: /tmp/benthos.sock
    codec: lines
```

</TabItem>
<TabItem value="advanced">

```yaml
# All config fields, showing default values
input:
  socket:
    network: unix
    address: /tmp/benthos.sock
    codec: lines
    max_buffer: 1000000
```

</TabItem>
</Tabs>

If multipart is set to false each line of data is read as a separate message. If
multipart is set to true each line is read as a message part, and an empty line
indicates the end of a message.

Messages consumed by this input can be processed in parallel, meaning a single
instance of this input can utilise any number of threads within a
`pipeline` section of a config.

If the delimiter field is left empty then line feed (\n) is used.

## Fields

### `network`

A network type to assume (unix|tcp).


Type: `string`  
Default: `"unix"`  
Options: `unix`, `tcp`.

### `address`

The address to connect to.


Type: `string`  
Default: `"/tmp/benthos.sock"`  

```yaml
# Examples

address: /tmp/benthos.sock

address: 127.0.0.1:6000
```

### `codec`

The way in which the bytes of consumed files are converted into messages, codecs are useful for specifying how large files might be processed in small chunks rather than loading it all in memory. It's possible to consume lines using a custom delimiter with the `delim:x` codec, where x is the character sequence custom delimiter. Codecs can be chained using `/`, for example a gzip compressed CSV file can be consumed with the codec `gzip/csv`.


Type: `string`  
Default: `"lines"`  

| Option | Summary |
|---|---|
| `auto` | EXPERIMENTAL: Attempts to derive a codec for each file based on information such as the extension. For example, a .tar.gz file would be consumed with the `gzip/tar` codec. Defaults to all-bytes. |
| `all-bytes` | Consume the entire file as a single binary message. |
| `chunker:x` | Consume the file in chunks of a given number of bytes. |
| `csv` | Consume structured rows as comma separated values, the first row must be a header row. |
| `delim:x` | Consume the file in segments divided by a custom delimiter. |
| `gzip` | Decompress a gzip file, this codec should precede another codec, e.g. `gzip/all-bytes`, `gzip/tar`, `gzip/csv`, etc. |
| `lines` | Consume the file in segments divided by linebreaks. |
| `multipart` | Consumes the output of another codec and batches messages together. A batch ends when an empty message is consumed. For example, the codec `lines/multipart` could be used to consume multipart messages where an empty line indicates the end of each batch. |
| `tar` | Parse the file as a tar archive, and consume each file of the archive as a message. |


```yaml
# Examples

codec: lines

codec: "delim:\t"

codec: delim:foobar

codec: gzip/csv
```

### `max_buffer`

The maximum message buffer size. Must exceed the largest message to be consumed.


Type: `number`  
Default: `1000000`  


