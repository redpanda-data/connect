---
project_name: redpanda-connect
version: 2
builds:
  - id: connect-ai
    main: cmd/redpanda-connect-ai/main.go
    binary: redpanda-connect-ai
    goos: [ linux ]
    goarch: [ arm64 ]
    env:
      - CGO_ENABLED=0
    tags:
      - timetzdata
    ldflags: >
      -s -w
      -X main.Version={{.Version}}
      -X main.DateBuilt={{.Date}}
      -X main.BinaryName=redpanda-connect-ai

dockers_v2:
  - id: connect-ai
    dockerfile: resources/docker/ai.Dockerfile
    ids:
      - connect-ai
    images:
      - redpandadata/connect
    tags:
      - "{{ .Version }}-ai"
    platforms:
      - linux/arm64
    extra_files:
      - config/docker.yaml

dist: target/dist
